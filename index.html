<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<meta property="og:title"
		content="Fun events to excercise" />
		<meta property="og:site_name" content="My Fitness Buddy"/>
		<meta property="og:url"
		content="https://patrickziegler.se/fitnessbuddy" />
		<meta property="og:description" content="This is just a placeholder" />
		<meta property="fb:app_id" content="1379990932330458" />
		<meta property="og:type" content="event" />
		<meta property="article:author" content="https://patrickziegler.se/fitnessbuddy" />
		<meta property="article:publisher" content="https://patrickziegler.se/fitnessbuddy" />
		<base href="/fitnessbuddy/">
		<title>FitnessBuddy</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/4.9.0/bootstrap-social.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="css/style.css">


		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.min.js"></script>
		<script src='https://cdn.firebase.com/js/client/2.2.2/firebase.js'></script>
		<script src="https://cdn.firebase.com/libs/angularfire/1.0.0/angularfire.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.1/ui-bootstrap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.1/ui-bootstrap-tpls.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-moment/0.10.0/angular-moment.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-google-maps/2.1.0-X.10/angular-google-maps.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.7.0/lodash.min.js"></script>
		<script src="js/angular-social-links.js"></script>

		<script src="js/script.js"></script>
	</head>
	<body>
	<script type="text/javascript">
		var eventListFormat = "{{ event.date | amDateFormat:'DD/MM/YYYY' }} : {{ event.name }}: {{ event.marker.name }} - {{ event.date | amDateFormat:'HH:mm'}}"
	</script>
		<a href="https://www.ssl.com/site_seals/f3080572-5536a613/site_report" onclick="window.open('https://www.ssl.com/site_seals/f3080572-5536a613/site_report', 'site_report','height=500, width=400, top=100, left=100'); return false;" onmouseover="this.style.cursor='pointer'" style="border: none;"><img alt="Ssl_seal_1" src="https://www.ssl.com/images/ssl_seal_1.png" width="130px" /></a>
		<div ng-app='fitnessBuddy' class="container">
			<div ng-controller="EventListCtrl">
				<script type="text/ng-template" id="newEvent.html">
				<div class="modal-header">
					<h3 class="modal-title">New Event</h3>
				</div>
				<div class="modal-body">
					<input type='text' ng-model='eventname' placeholder='Event types' ng-required="true" typeahead="type.name for type in getTypes($viewValue)" typeahead-loading="loadingTypes" class="form-control"/><i ng-show="loadingTypes" class="glyphicon glyphicon-refresh"></i>
					<div id='searchbox_div'></div>
					<input type="text" datepicker-popup="yyyy/MM/dd" ng-model="eventdate" min-date="minDate" is-open="opened" datepicker-options="dateOptions" close-text="Close" placeholder="EventDate"/>
					<button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
					<timepicker ng-model="eventtime" ng-change="changed()" hour-step="1" minute-step="10" show-meridian="false" readonly-input="true"></timepicker>
					<ui-gmap-google-map center='map.center' zoom='map.zoom' draggable='true' options='options'>
					<ui-gmap-search-box ng-model="eventlocation" template='searchbox.template' events='searchbox.events' options='searchbox.options' parentdiv='searchbox.parentdiv'>
					</ui-gmap-search-box>
					<ui-gmap-marker coords="marker.coords" options="marker.options" events="marker.events" idkey="marker.id">
					</ui-gmap-google-map>
				</div>
				<div class="modal-footer">
					<button class="btn btn-primary" ng-click="ok()">OK</button>
					<button class="btn btn-warning" ng-click="cancel()">Cancel</button>
				</div>
				</script>
				<script type="text/ng-template" id='searchbox.tpl.html'>
				<input id="pac-input" class="pac-input" type="text" ng-model="ngModel" placeholder="Event Location">
				</script>
				<div class="row">
					<div ng-show="authData" class="col-md-4">
						<p>Hello, {{ authData.facebook.displayName }} : {{ authData.facebook.cachedUserProfile.gender }}</p>
						<a class='btn btn-block btn-social btn-facebook' ng-click="auth.$unauth()">
								<i class='fa fa-facebook'></i>Logout
						</a>
						<button class="btn btn-primary" ng-click="open()">Add Event</button>
					</div>
					<div ng-show="authData" class="col-md-8">
						My events(created or joined):
						<ul>
							<li ng-repeat="event in orderedOwnedEvents">
							<script type="text/javascript">document.write(eventListFormat)</script>
							<button  ng-click="open(event)" class="btn btn-default">view</button>
							<button ng-click="remove(event.$id)" class="btn btn-warning">remove</button></li>
						</ul>
					</div>
					<div ng-hide="authData" class="col-md-4">
						<p>Welcome. Here you can see a list will all events currently available</p>
						<p>If you would like to add a new event or join an event, please login first</p>
						<p>Currently only facebook is supported</p>
							<a class='btn btn-block btn-social btn-facebook' ng-click="login()">
								<i class='fa fa-facebook'></i>Login With Facebook
							</a>
					</div>
				</div>
				<h1>Events</h1>
				<div class="row">
					<div class="col-md-8">
					<table class="table table-striped">
						<tbody ng-repeat="event in filteredEvents">
						<tr>
							<td>
								<script type="text/javascript">document.write(eventListFormat)</script>
							</td>
							<td>
							<div class="btn-group" role="group" aria-label="">
								<button ng-click="open(event)" class="btn btn-default">view</button>
								<button ng-show="authData" ng-click="join(event)" class="btn btn-primary">join</button>
								<a class="btn btn-social-icon btn-facebook" href="" social-facebook>
									<i class='fa fa-facebook'></i>
								</a>
							</div>
							</td>
							</tr>
						</tbody>
					</table>
					</div>
				</div>
				<script type="text/ng-template" id="viewEvent.html">
					<div class="modal-header">
						<h3 class="modal-title">View Event</h3>
					</div>
					<div class="modal-body">
						<input type='text' value = '{{ event.name }}' readonly/>
						<input type='text' value = '{{ event.marker.name }}' readonly/>
						<input type="text" value = "{{ event.date | amDateFormat:'DD/MM/YYYY' }} @ {{ event.date | amDateFormat:'HH:mm'}}" readonly/>
						<ui-gmap-google-map center='map.center' zoom='map.zoom' draggable='true' options='options'>
						<ui-gmap-marker coords="marker.coords" options="marker.options" events="marker.events" idkey="marker.id">
						</ui-gmap-google-map>
					</div>
					<div class="modal-footer">
						<button class="btn btn-primary" ng-click="ok()">OK</button>
						<button class="btn btn-warning" ng-click="cancel()">Cancel</button>
					</div>
				</script>
				<div>
					<ul>
						<li><a href="https://github.com/pziegler/fitnessbuddy/issues" target="_blank">Submit Website Bug/Requests</a></li>
					</ul>
				</div>
			</div>
		</div>
	</body>
	<div id="fb-root"></div>
</html>